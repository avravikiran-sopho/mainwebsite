{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/loginhome.css' %}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="google-signin-client_id" content="562564065281-vieaesrlht65nerlj9nsecvvupr2e91f.apps.googleusercontent.com">
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-6 col-md-offset-3">
		  		<div class="panel panel-login">
					<div class="panel-heading">
						<div class="row">
							<div class="col-xs-6">
								<a href="#" class="active" onclick="showLogin()" id="login-form-link">Login</a>
							</div>
							<div class="col-xs-6">
								<a href="#" id="register-form-link" onclick="showRegister()">Register</a>
							</div>
						</div>
						<hr>
					</div>
					<div class="panel-body">
						<div class="row">
							<div class="col-lg-12">
								<form id="login-form" action="do_login/" method="post" role="form" style="display: block;">
									{% csrf_token %} 
									<div class="form-group">
										{{LoginForm.username}}
									</div>
									<div class="form-group">
										{{LoginForm.password}}
									</div>						
									<div class="form-group">
										<div class="row">
											<div class="col-sm-6 col-sm-offset-3">
												<input type="submit" name="login-submit" id="login-submit" tabindex="4" class="form-control btn btn-login" value="Log In">
											</div>
										</div>
									</div>

								</form>
								<form id="register-form" action="do_register/" method="post" role="form" style="display: none;">
									<!-- <div class="g-signin2" data-onsuccess="onSignIn"></div>
									<a href="#" onclick="signOut();">Sign out</a> -->
									{% csrf_token %} 
									<img width=100 height=100 src="" alt="profile pic" id="pic">
									<div class="form-group">
										{{RegisterForm.username}}
									</div>
									<div class="form-group">
										{{RegisterForm.email}}
									</div>
									<div class="form-group">
										{{RegisterForm.password1}}
									</div>
									<div class="form-group">
										{{RegisterForm.password2}}
									</div>
									<div class="form-group">
										{{ ProfileForm.college }}
									</div>
									<div class="form-group">
										{{ ProfileForm.mobile }}
									</div>
									<div class="form-group">
										{{ ProfileForm.city }}
									</div>
									
									<div class="form-group">
										<div class="row">
											<div class="col-sm-6 col-sm-offset-3">
												<input type="submit" name="register-submit" id="register-submit" tabindex="4" class="form-control btn btn-register" value="Register Now">
											</div>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

<script type="text/javascript">
	// function onSignIn(googleUser) {
	//   var profile = googleUser.getBasicProfile();
	//   console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
	//   console.log('Name: ' + profile.getName());
	//   console.log('Image URL: ' + profile.getImageUrl());
	//   console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.

	//   document.getElementById('name').value = profile.getName();
	//   document.getElementById('email').value = profile.getEmail();
	//   document.getElementById('pic').src = profile.getImageUrl();

	// }

 //    function signOut() {
 //    	var auth2 = gapi.auth2.getAuthInstance();
	//     auth2.signOut().then(function () {
	//       console.log('User signed out.');
	//     });
	// }

	{% if register %}
	showRegister();
	{% endif %}

	{% if message %}
	alert ( "{{ message }}" );
	{% endif %}

	function fade(element) {
	    var op = 1;  // initial opacity
	    var timer = setInterval(function () {
	        if (op <= 0.1){
	            clearInterval(timer);
	            element.style.display = 'none';
	        }
	        element.style.opacity = op;
	        element.style.filter = 'alpha(opacity=' + op * 100 + ")";
	        op -= op * 0.1;
	    }, 2);
	}

	function unfade(element) {
	    var op = 0.1;  // initial opacity
	    element.style.display = 'block';
	    var timer = setInterval(function () {
	        if (op >= 1){
	            clearInterval(timer);
	        }
	        element.style.opacity = op;
	        element.style.filter = 'alpha(opacity=' + op * 100 + ")";
	        op += op * 0.1;
	    }, 2);
	}
	function showRegister() {
	 	document.getElementById("login-form-link").className = "";
	 	fade(document.getElementById("login-form"))
	 	unfade(document.getElementById("register-form"))
	 	document.getElementById("register-form-link").className = "active";
 	}

	function showLogin() {
	 	document.getElementById("register-form-link").className = "";
	 	fade(document.getElementById("register-form"))
	 	unfade(document.getElementById("login-form"))
	 	document.getElementById("login-form-link").className = "active";
 	}

</script>